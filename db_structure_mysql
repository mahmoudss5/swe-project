create database project;
use project;
create table users(
    id int auto_increment primary key,
    name varchar(50) not null,
    email varchar(50) not null unique,
    password varchar(255) not null,
    created_at timestamp default current_timestamp,
    date_of_birth date,
    age int,
    flag boolean default false
);
create table admin(
    id int auto_increment primary key,
    name varchar(50) not null,
    email varchar(50) not null unique,
    password varchar(255) not null,
    date_of_birth date,
    age int,
    created_at timestamp default current_timestamp
);
create table posts(
    post_id int auto_increment primary key,
    user_id int not null,
    post_tag varchar(100) not null,
    content text not null,
    up_vote int default 0,
    down_vote int default 0,
    created_at timestamp default current_timestamp,
    updated_at timestamp default current_timestamp on update current_timestamp,
    foreign key (user_id) references users(id)
);
create table comments(
    comment_id int auto_increment primary key,
    post_id int not null,
    user_id int not null,
    content text not null,
    up_vote int default 0,
    down_vote int default 0,
    created_at timestamp default current_timestamp,
    updated_at timestamp default current_timestamp on update current_timestamp,
    foreign key (post_id) references posts(post_id),
    foreign key (user_id) references users(id)
);
create  table badges(
badge_id int auto_increment primary key,
badge_name varchar(50) not null,
badge_description varchar(255) not null,
privilege varchar(50) not null
);
create table post_edits(
    edit_id int auto_increment primary key,
    post_id int not null,
    user_id int not null,
    edit_content text not null,
    created_at timestamp default current_timestamp,
    foreign key (post_id) references posts(post_id),
    foreign key (user_id) references users(id)
);
create table comments_edits(
    edit_id int auto_increment primary key,
    comment_id int not null,
    user_id int not null,
    edit_content text not null,
    created_at timestamp default current_timestamp,
    foreign key (comment_id) references comments(comment_id),
    foreign key (user_id) references users(id)
);
create table  notifications(
    notification_id int auto_increment primary key,
    user_id int not null,
    post_id int not null,
    comment_id int not null,
    notification_type varchar(50) not null,
    notification_message varchar(255) not null,
    created_at timestamp default current_timestamp,
    foreign key (user_id) references users(id),
    foreign key (post_id) references posts(post_id),
    foreign key (comment_id) references comments(comment_id)
);
create table user_badges(
    user_badge_id int auto_increment primary key,
    user_id int not null,
    badge_id int not null,
    created_at timestamp default current_timestamp,
    foreign key (user_id) references users(id),
    foreign key (badge_id) references badges(badge_id)
);
create table post_reports(
    report_id int auto_increment primary key,
    post_id int not null,
    user_id int not null,
    report_reason varchar(255) not null,
    created_at timestamp default current_timestamp,
    foreign key (post_id) references posts(post_id),
    foreign key (user_id) references users(id)
);
create table comment_reports(
    report_id int auto_increment primary key,
    comment_id int not null,
    user_id int not null,
    report_reason varchar(255) not null,
    created_at timestamp default current_timestamp,
    foreign key (comment_id) references comments(comment_id),
    foreign key (user_id) references users(id)
);
create table leaders_board(
    leaderboard_id int auto_increment primary key,
    user_id int not null,
    total_posts int default 0,
    total_comments int default 0,
    total_votes int default 0,
    created_at timestamp default current_timestamp,
    foreign key (user_id) references users(id)
);
create table  post_votes(
    vote_id int auto_increment primary key,
    post_id int not null,
    user_id int not null,
    vote_type enum('up', 'down') not null,
    created_at timestamp default current_timestamp,
    foreign key (post_id) references posts(post_id),
    foreign key (user_id) references users(id)
);
create table comment_votes(
    vote_id int auto_increment primary key,
    comment_id int not null,
    user_id int not null,
    vote_type enum('up', 'down') not null,
    created_at timestamp default current_timestamp,
    foreign key (comment_id) references comments(comment_id),
    foreign key (user_id) references users(id)
);
create table login_history(
    login_id int auto_increment primary key,
    user_id int not null,
    login_time timestamp default current_timestamp,
    foreign key (user_id) references users(id)
);

